<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data Display</title>
    <script>
        // Function to handle WebSocket connection
        function connectWebSocket() {
            var socket = new WebSocket("ws://https://example-4y0h.onrender.com//ws/pi/");

            // On connection open
            socket.onopen = function (event) {
                console.log("WebSocket connection opened");
            };

            // On receiving message
            socket.onmessage = function (event) {
                // Parse the received JSON data
                var data = JSON.parse(event.data);
                
                // Display the received data
                var dataDisplay = document.getElementById("dataDisplay");
                dataDisplay.innerHTML = ""; // Clear previous data
                
                for (var key in data) {
                    if (data.hasOwnProperty(key)) {
                        var paragraph = document.createElement("p");
                        paragraph.textContent = key + ": " + data[key];
                        dataDisplay.appendChild(paragraph);
                    }
                }
            };

            // On connection close
            socket.onclose = function (event) {
                console.log("WebSocket connection closed");
            };

            // On connection error
            socket.onerror = function (error) {
                console.error("WebSocket error:", error);
            };
        }

        // Function to initialize WebSocket connection
        function init() {
            connectWebSocket();
        }
    </script>
</head>
<body onload="init()">
    <h1>Data Display</h1>
    <div id="dataDisplay"></div> <!-- Add an ID to the div to display data -->
</body>
</html>
